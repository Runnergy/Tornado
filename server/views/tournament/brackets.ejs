<div class="container bracket-container p-5">
    <!-- Title of the tournament -->
    <h2 class="text-center mb-3"><%= tournament.title %></h2>

    <!-- Description of the tournament -->
    <h6 class="text-center mb-5"><%= tournament.description %></h6>

    <!-- If last round's participant array is not empty -->
    <% if(tournament.rounds[tournament.rounds.length-1].participants.length > 0) { %>

        <!-- Display winner -->
        <h4 class="text-center mb-5">
            CONGRATULATIONS!
            <%= tournament.rounds[tournament.rounds.length-1].participants[0] %>
            is the winner
        </h4>

    <% } %>

    <form class="form" method="">
        <table>
            <tr>
                <!-- repeats the number of rounds -->
                <% for(let count = 0; count <= tournament.roundTotal; count++) { %>
                    <td class="text-center">ROUND <%= count %></td>
                <% } %>
            </tr>

            <!-- repeats for the number of participants by multiplying the bouts by 2 -->
            <% for(let count = 0; count < tournament.type * 2; count++) { %>
                <tr>
                    <td>
                        <div class="input-group mb-3 first">
                            <!-- container number -->
                            <div class="input-group-prepend">
                            <button class="btn btn-secondary" type="button"><%= count + 1 %></button>
                            </div>

                            <!-- input text field diaplaying participant' name -->
                            <input type="text" class="form-control" 
                            value="<% if(tournament.rounds[0].participants != null) { %><%= tournament.rounds[0].participants[count] %><% } %>" 
                            placeholder="Username" aria-label="" 
                            aria-describedby="basic-addon1"
                            size="10"  maxlength="10"
                            name="round1<%= count + 1 %>"
                            disabled>
                        </div>
                    </td>

                    <!-- 2nd column -->
                    <% if(count%2 == 0) { %>
                        <td rowspan="2">
                            <div class="input-group mb-3 second">
                                <!-- container number -->
                                <div class="input-group-prepend">
                                <button class="btn btn-secondary" type="button"><%= count/2 + 1 %></button>
                                </div>
                                <!-- input text field diaplaying participant' name -->
                                <input type="text" class="form-control" 
                                value="<% if(tournament.rounds[1].participants != null) { %><%= tournament.rounds[1].participants[count/2] %><% } %>" 
                                placeholder="Username" aria-label="" 
                                aria-describedby="basic-addon1"
                                size="10"  maxlength="10"
                                disabled>
                            </div>
                        </td>
                    <% } else { %>
                        <td></td> 
                    <% } %>

                    <!-- 3rd column -->
                    <% if(count%4 == 0) { %>
                        <td rowspan="4">
                            <div class="input-group mb-3 third">
                                <!-- container number -->
                                <div class="input-group-prepend">
                                <button class="btn btn-secondary" type="button"><%= count/4 + 1 %></button>
                                </div>
                                <!-- input text field diaplaying participant' name -->
                                <input type="text" class="form-control" 
                                value="<% if(tournament.rounds[2].participants != null) { %><%= tournament.rounds[2].participants[count/4] %><% } %>" 
                                placeholder="Username" aria-label="" 
                                aria-describedby="basic-addon1"
                                size="10"  maxlength="10"
                                disabled>
                            </div>
                        </td>
                    <% } else { %>
                        <td></td> 
                    <% } %>

                    <!-- 4th column -->
                    <% if(count%8 == 0) { %>
                        <td rowspan="8">
                            <div class="input-group mb-3 forth">
                                <!-- container number -->
                                <div class="input-group-prepend">
                                <button class="btn btn-secondary" type="button"><%= count/8 + 1 %></button>
                                </div>
                                <!-- input text field diaplaying participant' name -->
                                <input type="text" class="form-control" 
                                value="<% if(tournament.rounds[3].participants != null) { %><%= tournament.rounds[3].participants[count/8] %><% } %>" 
                                placeholder="Username" aria-label="" 
                                aria-describedby="basic-addon1"
                                size="10"  maxlength="10"
                                disabled>
                            </div>
                        </td>
                    <% } else { %>
                        <td></td> 
                    <% } %>

                    <!-- only applied when we have 4th rounds / 5th column -->
                    <% if(tournament.roundTotal == '4') { %>
                        <% if(count%16 == 0) { %>
                            <td rowspan="16">
                                <div class="input-group mb-3 fifth">
                                    <!-- container number -->
                                    <div class="input-group-prepend">
                                    <button class="btn btn-secondary" type="button"><%= count/16 + 1 %></button>
                                    </div>
                                    <!-- input text field diaplaying participant' name -->
                                    <input type="text" class="form-control" 
                                    value="<% if(tournament.rounds[4].participants != null) { %><%= tournament.rounds[4].participants[count/16] %><% } %>" 
                                    placeholder="Username" aria-label="" 
                                    aria-describedby="basic-addon1"
                                    size="10"  maxlength="10"
                                    disabled>
                                </div>
                            </td>
                        <% } else { %>
                            <td></td> 
                        <% } %>
                    <% } %>
                </tr>
            <% } %>
        </table>
    </form>

    <!-- table displaying tournament progress -->
    <table class="table table-sm table-dark table-bordered table-striped table-hover">
        <tr>
            <td></td>
            <% for(let i = 1; i <= tournament.roundTotal; i++) { %>
                <td class="text-center">ROUND <%= i %></td>
            <% } %>
        </tr>
        <!-- repeat the number of participants -->
        <% for(let i = 0; i < tournament.type * 2; i++) { %>
            <tr>
                <td>
                    <%= tournament.rounds[0].participants[i] %>
                </td>
                <% for(let j = 1; j <= tournament.roundTotal; j++) { %>
                    <!-- display o for winner and x for loser -->
                    <td>
                        <% if(tournament.rounds[j].participants.includes(tournament.rounds[0].participants[i])) { %>
                            o
                        <% } else { %>
                            x
                        <% } %>
                    </td>
                <% } %>
            </tr>
        <% } %>
    </table>
    <!-- export PDF button -->
    <div class="text-center p-5">
        <button class="btn btn-primary" id="btnExport">Export PDF</button>
    </div>
    
</div>